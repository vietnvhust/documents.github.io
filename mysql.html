<!DOCTYPE html>
<html lang="en">
<head>
    <title>Mysql</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">    
    <link rel="shortcut icon" href="favicon.ico">  
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- FontAwesome JS -->
    <script defer src="assets/fontawesome/js/all.js"></script>
    <!-- Global CSS -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">   
    <!-- Plugins CSS -->    
    <link rel="stylesheet" href="assets/plugins/prism/prism.css">
    <link rel="stylesheet" href="assets/plugins/elegant_font/css/style.css">  
      
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="assets/css/styles.css">
	
	<style>
		code.language-javascript {
			width:100%;
		}
	</style>
    
</head> 

<body class="body-green">
    <div class="page-wrapper">
        <div class="doc-wrapper">
            <div class="container">
                <div class="doc-body row">
                    <div class="doc-content col-md-9 col-12 order-1">
                        <div class="content-inner">
                            <section id="mysql-section" class="doc-section">
                                <div id="mysql-where-date" class="section-block">
                                    <div class="code-block">
                                        <h6>Where date</h6>
                                        <pre><code class="language-javascript">
1. 
DATE(i.created_on) BETWEEN '$from' AND '$to'";
2.
$from = date('Y-m-d', strtotime('-5 month', strtotime(date('Y-m-d'))));
WHERE (date(last_login_on) BETWEEN '" . $from . "' AND now())
3.
WHERE (parent_id=257 OR id=257)
4.
WHERE Year(vtiger_campaignscf.cf_1015)=Year(CURDATE() - INTERVAL 1 MONTH) AND Month(vtiger_campaignscf.cf_1015)= Month(CURDATE() - INTERVAL 1 MONTH)
5. 
WHERE c.deleted = 0 AND p.discontinued = 1 AND p.productname LIKE '%{$text}%'
6. 
WHERE ore.status IN("C","S") AND ore.id = (SELECT MAX(ore2.id) FROM cms_cmsmart_order_recurring as ore2 WHERE ore2.order_id = ore.order_id)
7.
WHERE u.email!="" AND DATE(IF(ore.modified="0000-00-00 00:00:00",ore.created,ore.modified)) BETWEEN NOW() - INTERVAL 1 MONTH AND NOW()
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
                                <div id="mysql-concat" class="section-block">
                                    <div class="code-block">
                                        <h6>Concat</h6>
                                        <pre><code class="language-javascript">
CONCAT(user.lastname,' ',user.firstname)
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
<div id="mysql-Group-By" class="section-block">
                                    <div class="code-block">
                                        <h6>Group By</h6>
										<p>Câu lệnh group by trong sql được dùng để kết hợp với lệnh SELECT để sắp xếp dữ liệu đồng nhất vào các nhóm. Đi sau mệnh đề WHERE và ở trước mệnh đề ORDER BY.</p>
                                        <pre><code class="language-javascript">
AVG, COUNT, MAX, MIN
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->	
<div id="mysql-Group-By" class="section-block">
                                    <div class="code-block">
                                        <h6>Convert Int to Date</h6>
                                        <pre><code class="language-javascript">
$temp_from = date('Y-m-01');
$from = date('Y-m-d', strtotime('-1 month', strtotime($temp_from)));
$to = date("Y-m-t", strtotime($from));
$month = date("m", strtotime($from));
$year = date("Y", strtotime($from));
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
<div id="mysql-Group-By" class="section-block">
                                    <div class="code-block">
                                        <h6>Select</h6>
                                        <pre><code class="language-javascript">
SELECT *, 
(SELECT `value` FROM custom_values WHERE customized_id=issues.id AND custom_field_id=5) AS money, 
(SELECT `value` FROM custom_values WHERE customized_id=issues.id AND custom_field_id=4) AS ot FROM issues
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->	
<div id="mysql-sum" class="section-block">
                                    <div class="code-block">
                                        <h6>Sum</h6>
                                        <pre><code class="language-javascript">
SUM(t.hours) as hours
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
<div id="mysql-groupconcat" class="section-block">
                                    <div class="code-block">
                                        <h6>GROUP CONCAT</h6>
                                        <pre><code class="language-javascript">
GROUP_CONCAT(DISTINCT `time_entries`.issue_id)
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
<div id="mysql-date" class="section-block">
                                    <div class="code-block">
                                        <h6>DATE</h6>
                                        <pre><code class="language-javascript">
DATE_ADD(te.created_on, INTERVAL +7 HOUR)
MONTH (sc.cf_804)
DATEDIFF(NOW(),due_date)
(DATE_SUB(CURDATE(), INTERVAL -4 day))
DATE(NOW()) >= DATE(effective_date)
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
<div id="mysql-if" class="section-block">
                                    <div class="code-block">
                                        <h6>IF</h6>
                                        <pre><code class="language-javascript">
IF(vp.sales_stage="1- Prospecting" AND DATE_ADD(vc.modifiedtime ,INTERVAL 13 hour)< NOW(),1,0)
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->
<div id="mysql-update" class="section-block">
                                    <div class="code-block">
                                        <h6>Update</h6>
                                        <pre><code class="language-javascript">
UPDATE vtiger_contactscf 
SET 
vgs_ltv = ( 
SELECT SUM(vs.total) AS total 
FROM vtiger_salesorder AS vs 
LEFT JOIN vtiger_crmentity AS vc ON vc.crmid = vs.salesorderid 
WHERE sostatus = 'Confirm' 
AND vc.deleted = 0 
AND vtiger_contactscf.contactid = vs.contactid )
										</code></pre>
                                    </div><!--//code-block-->
                                </div><!--//section-block-->								
							</section><!--//doc-section-->
                        </div><!--//content-inner-->
                    </div><!--//doc-content-->
                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
	                        
	                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
	                                <a class="nav-link scrollto" href="#mysql-section">Mysql</a>
                                    <nav class="doc-sub-menu nav flex-column">
										<a class="nav-link scrollto" href="#mysql-where-date">Where Date</a>
                                        <a class="nav-link scrollto" href="#mysql-concat">Concat</a>									
                                        <a class="nav-link scrollto" href="#mysql-Group-By">Group By</a>	
<a class="nav-link scrollto" href="#mysql-int-date">Convert Int to Date</a>										
<a class="nav-link scrollto" href="#mysql-select">Select</a>										
<a class="nav-link scrollto" href="#mysql-sum">SUM</a>										
<a class="nav-link scrollto" href="#mysql-groupconcat">GROUP CONCAT</a>										
<a class="nav-link scrollto" href="#mysql-date">DATE</a>										
<a class="nav-link scrollto" href="#mysql-if">IF</a>										
<a class="nav-link scrollto" href="#mysql-update">Update</a>										
                                    </nav><!--//nav-->
	                            </nav><!--//doc-menu-->
	                        
                        </div>
                    </div><!--//doc-sidebar-->
                </div><!--//doc-body-->              
            </div><!--//container-->
        </div><!--//doc-wrapper-->

    </div><!--//page-wrapper-->

    <!-- Main Javascript -->          
    <script type="text/javascript" src="assets/plugins/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/plugins/prism/prism.js"></script>
    <script type="text/javascript" src="assets/plugins/jquery-scrollTo/jquery.scrollTo.min.js"></script>
    <script type="text/javascript" src="assets/plugins/stickyfill/dist/stickyfill.min.js"></script>
    <script type="text/javascript" src="assets/js/main.js"></script>
    
</body>
</html> 

